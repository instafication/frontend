datasource db {
    provider = "postgresql"
    url = env("PUBLIC_DATABASE_URL")
    directUrl = env("PUBLIC_DIRECT_URL")
    schemas = ["public"]
}

generator client {
    provider = "prisma-client-js"
    binaryTargets = ["native"]
}

model profiles {
  id                           String @id
  email                        String ? @unique
  name                         String ?
        phone                        String ? @unique
  credits                      Int ? @default (3)
  subscription_expiration_date String ?
        raw_user_meta_data           Json ?

            @@schema("public")
}

model services {
  id                 String @id @default (uuid())
  user               String // UUID
  name               String // Service name
  notification       String // "Email or SMS"
  notificationWithin String // "Timestamp, notification within 1 hour, within 1 day or 2 days"
  options            Json ? @default ("{}") //Options for the service

    @@unique([user, name])
    @@schema("public")
}

model scrapers {
  id          Int @id @default (autoincrement())
  company     String ? // Example Stockholms Studentbost√§der
        frequency   Int ? @default (5) // Example 5, how often to scrape in minutes
  last_update BigInt ? // Example 1620000000, latest booking time found
        last_ping   BigInt ? // Example 1620000000, latest callback from scraper
            services    String[] @default ([]) // Example ["Laundry, "Renting", "Parking"]
  params      Json ? @default ("{}") // Example {"area": "medicinaren"}

    @@schema("public")
}

model notifications {
  id    String @id @default (uuid())
  title String // Example 'Ny notification'
  body  String // Example 'Ny tid hittad!'
  date  DateTime @default (now()) // Example 2021-05-01T00:00:00.000Z
  area  String // Example medicinaren

    @@schema("public")
}