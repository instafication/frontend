name = "frontend"
main = ".svelte-kit/cloudflare/_worker.js"
compatibility_flags = [ "nodejs_compat" ]
compatibility_date = "2025-12-17"
preview_urls = false
minify = true

routes = [
  { pattern = "instafication.shop", custom_domain = true },
  { pattern = "www.instafication.shop", custom_domain = true }
]

[assets]
directory = ".svelte-kit/cloudflare"
binding = "ASSETS"

[observability.logs]
enabled = true

[placement]
mode = "smart"

[[d1_databases]]
binding = "DB"
database_name = "prod"
database_id = "" # 13343-3211-1234-aeab-ea0a2fa81a6d"
migrations_dir = "drizzle/migrations"
experimental_remote = true

[vars]
ENVIRONMENT = "production"

# Public keys (safe to commit)
PUBLIC_POSTHOG_KEY = ""
PUBLIC_POSTHOG_HOST = "https://eu.i.posthog.com"
STRIPE_PUBLISHABLE_KEY = ""

# ============================================================================
# SECRETS - Set these via Cloudflare dashboard or `wrangler secret put`
# Do NOT put actual values in this file!
# ============================================================================
#
# Required secrets:
#   wrangler secret put RESEND_API_KEY
#   wrangler secret put BETTER_AUTH_SECRET
#   wrangler secret put STRIPE_SECRET_KEY
#   wrangler secret put STRIPE_WEBHOOK_SECRET
#   wrangler secret put CLOUDFLARE_D1_TOKEN
#
# Generate a secure BETTER_AUTH_SECRET:
#   openssl rand -base64 32
# ============================================================================